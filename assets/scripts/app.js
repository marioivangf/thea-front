!function(){function e(){var e=document.getElementById("af-container"),n={};n.bg=document.getElementById("af-bg-color").value,n.accent=document.getElementById("af-accent-color").value,n.text=tinycolor(n.bg).isDark()?"white":"rgba(0, 0, 0, 0.8)",n.input_bg=tinycolor(n.bg).getBrightness()>246?"#ECECEC":"white",n.accent_darken=tinycolor(n.accent).darken(5),n.accent_text=tinycolor(n.accent_darken).isDark()?"white":"rgba(0, 0, 0, 0.8)";var a=v.styles,o=Mustache.render(a,n);t("af-styles",o),e.classList.toggle("af--dark",tinycolor(n.bg).isDark())}function t(e,t){var n=document.getElementById(e);n&&document.getElementsByTagName("head")[0].removeChild(n),n=document.createElement("style"),n.type="text/css",n.id=e,n.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(n)}function n(){var e=window.innerWidth;document.body.classList.toggle("not-responsive-notice",e<980)}function a(e,t,n){var a=document.querySelectorAll(e);_(a).each(function(e){e.addEventListener(t,n)})}function o(e,t,n){var a=document.querySelectorAll(e);_(a).each(function(e){e.addEventListener(t,n)}),a.length>0&&n()}function r(e,t,n){e.addEventListener(t,function(e){return e.target.removeEventListener(e.type,arguments.callee),n(e)})}document.body.dataset.pathName;window.addEventListener("resize",n,!0),n(),a("[data-synced-input]","keyup",function(e){var t=e.currentTarget,n=document.getElementById(t.dataset.syncedInput),a=t.value.trim();n.classList.toggle("clean",""===a),n.textContent=""===a?t.placeholder:a}),a("[data-password-toggle]","mousedown",function(e){var t=e.currentTarget.parentNode.getElementsByTagName("INPUT")[0];t.type="text"}),a("[data-password-toggle]","mouseup",function(e){var t=e.currentTarget.parentNode.getElementsByTagName("INPUT")[0];t.type="password"}),a("[data-parent-class-toggle]","click",function(e){var t=e.currentTarget;t.parentNode.classList.toggle(t.dataset.parentClassToggle)}),a("[data-close-parent]","click",function(e){var t=e.currentTarget;t.parentNode.style.display="none"}),a("[data-dropdown-toggle]","click",function(e){e.stopPropagation();var t=e.currentTarget.parentNode.classList,n="dropdown--opened";t.contains(n)?t.remove(n):(t.add(n),r(document,"click",function(){t.remove(n)}))}),a("[data-image-input] input[type='file']","change",function(e){var t=e.currentTarget,n=t.parentNode.querySelector("img");if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(e){t.parentNode.classList.remove("clean"),n.src=e.target.result},a.readAsDataURL(t.files[0])}});var c=document.querySelectorAll("[data-searcher]");_(c).each(function(e){e.addEventListener("submit",function(t){t.preventDefault();var n=e.action,a=e.dataset.searcher,o=new FormData(e);qwest.post(n,o).then(function(e,t){console.log(t),document.getElementById(a).innerHTML=t})})}),_(document.querySelectorAll("[data-input-color]")).each(function(e){var t=e.querySelector("[data-input]"),n=e.querySelector("[data-impostor]");t.addEventListener("change",function(e){n.style.backgroundColor=t.value},!1),n.style.backgroundColor=t.value}),_(document.querySelectorAll("[data-dd]")).each(function(e){new Dropdown(e)}),_(document.querySelectorAll("[data-tabule]")).each(function(e){new Tabule(e)}),_(document.querySelectorAll("[data-sticker]")).each(function(e){var t=e.dataset.sticker||"{}";new Sticker(e,JSON.parse(t))}),_(document.querySelectorAll("[data-adder]")).each(function(e){var t=e.querySelector("[data-adder-list]"),n=e.querySelector("[data-adder-sample]"),a=n.cloneNode(!0),o=e.querySelector("[data-adder-button]");o.addEventListener("click",function(){var e=a.cloneNode(!0);t.appendChild(e)})});var d=document.getElementById("question-options");if(d){var s=document.getElementById("quest-options-cont"),l=document.getElementById("quest-type"),i=function(){var e=l.options[l.selectedIndex];console.log(e.dataset.options),s.style.display=e.dataset.options?"block":"none"};l.addEventListener("change",i),i();dragula([d],{removeOnSpill:!0,moves:function(e,t,n,a){return!(t.children.length<2)&&n.classList.contains("drag-handle")}})}Chart.defaults.global.title.display=!0;var u=document.getElementById("pie-chart");if(u){new Chart(u.getContext("2d"),{type:"doughnut",options:{maintainAspectRatio:!1,title:{text:"GÃ©nero de los pacientes"}},data:{labels:["Mujeres","Hombres"],datasets:[{backgroundColor:["#34495e","#3498db"],data:[522,323]}]}})}var g=document.getElementById("age-chart");if(g){new Chart(g.getContext("2d"),{type:"bar",options:{maintainAspectRatio:!1,title:{text:"Edad promedio de los pacientes"}},data:{labels:["M","T","W","T","F","S","S"],datasets:[{label:"Mujeres",data:[12,19,3,17,6,3,7],backgroundColor:"#34495e"},{label:"Hombres",data:[2,29,5,5,2,3,10],backgroundColor:"#3498db"}]}})}var m=document.getElementById("patients-chart");if(m){new Chart(m.getContext("2d"),{type:"line",options:{maintainAspectRatio:!1,title:{text:"Promedio de encuestados"}},data:{labels:["M","T","W","T","F","S","S"],datasets:[{label:"Encuestados",data:[40,19,42,17,56,12,38],backgroundColor:"#34495e"}]}})}var p=document.getElementById("questions-source");if(p){var y=["number","multiple","scale","yes-no","styles"],v={};_(y).each(function(e){var t=document.getElementById(e+"-quest-tmpl").innerHTML;v[e]=t,Mustache.parse(v[e],["<%","%>"])});for(var f=[p],h=1;h<5;h++){var b=document.getElementById("visit-block-"+h);f.push(b)}var E=dragula(f,{removeOnSpill:!0,copy:function(e,t){return"questions-source"===t.id},accepts:function(e,t){return"questions-source"!==t.id},moves:function(e,t,n){return"questions-source"===t.id||n.classList.contains("drag-handle")}});E.on("drop",function(e,t,n,a){var o=e.dataset.questionDefinition;E.cancel(!0);var r=JSON.parse(o),c=t.querySelectorAll('[data-id="'+r.id+'"]');if(c.length>0)alert("Esta pregunta ya existe para esta visita");else{e.classList.contains("js-source")||e.remove(),r.visit_block=t.dataset.blockName,r.definition=o;var d=v[r.type],s=Mustache.render(d,r),l=document.createElement("div");l.innerHTML=s,t.insertBefore(l.children[0],a)}})}o("[data-appform-style-trigger]","change",e)}();
//# sourceMappingURL=app.js.map
