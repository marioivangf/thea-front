!function(){function e(){var e=document.getElementById("af-container"),a={};a.bg=document.getElementById("af-bg-color").value,a.accent=document.getElementById("af-accent-color").value,a.text=tinycolor(a.bg).isDark()?"white":"rgba(0, 0, 0, 0.8)",a.input_bg=tinycolor(a.bg).getBrightness()>246?"#ECECEC":"white",a.accent_darken=tinycolor(a.accent).darken(5),a.accent_text=tinycolor(a.accent_darken).isDark()?"white":"rgba(0, 0, 0, 0.8)";var n=y.styles,o=Mustache.render(n,a);t("af-styles",o),e.classList.toggle("af--dark",tinycolor(a.bg).isDark())}function t(e,t){var a=document.getElementById(e);a&&document.getElementsByTagName("head")[0].removeChild(a),a=document.createElement("style"),a.type="text/css",a.id=e,a.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(a)}function a(){var e=window.innerWidth;document.body.classList.toggle("not-responsive-notice",e<980)}function n(e,t,a){var n=document.querySelectorAll(e);_(n).each(function(e){e.addEventListener(t,a)})}function o(e,t,a){var n=document.querySelectorAll(e);_(n).each(function(e){e.addEventListener(t,a)}),n.length>0&&a()}function r(e,t,a){e.addEventListener(t,function(e){return e.target.removeEventListener(e.type,arguments.callee),a(e)})}document.body.dataset.pathName;window.addEventListener("resize",a,!0),a(),n("[data-synced-input]","keyup",function(e){var t=e.currentTarget,a=document.getElementById(t.dataset.syncedInput),n=t.value.trim();a.classList.toggle("clean",""===n),a.textContent=""===n?t.placeholder:n}),n("[data-password-toggle]","mousedown",function(e){var t=e.currentTarget.parentNode.getElementsByTagName("INPUT")[0];t.type="text"}),n("[data-password-toggle]","mouseup",function(e){var t=e.currentTarget.parentNode.getElementsByTagName("INPUT")[0];t.type="password"}),n("[data-parent-class-toggle]","click",function(e){var t=e.currentTarget;t.parentNode.classList.toggle(t.dataset.parentClassToggle)}),n("[data-close-parent]","click",function(e){var t=e.currentTarget;t.parentNode.style.display="none"}),n("[data-dropdown-toggle]","click",function(e){e.stopPropagation();var t=e.currentTarget.parentNode.classList,a="dropdown--opened";t.contains(a)?t.remove(a):(t.add(a),r(document,"click",function(){t.remove(a)}))}),n("[data-image-input] input[type='file']","change",function(e){var t=e.currentTarget,a=t.parentNode.querySelector("img");if(t.files&&t.files[0]){var n=new FileReader;n.onload=function(e){t.parentNode.classList.remove("clean"),a.src=e.target.result},n.readAsDataURL(t.files[0])}}),_(document.querySelectorAll("[data-input-color]")).each(function(e){var t=e.querySelector("[data-input]"),a=e.querySelector("[data-impostor]");t.addEventListener("change",function(e){a.style.backgroundColor=t.value},!1),a.style.backgroundColor=t.value}),_(document.querySelectorAll("[data-dd]")).each(function(e){new Dropdown(e)}),_(document.querySelectorAll("[data-tabule]")).each(function(e){new Tabule(e)}),_(document.querySelectorAll("[data-sticker]")).each(function(e){var t=e.dataset.sticker||"{}";new Sticker(e,JSON.parse(t))}),_(document.querySelectorAll("[data-adder]")).each(function(e){var t=e.querySelector("[data-adder-list]"),a=e.querySelector("[data-adder-sample]"),n=a.cloneNode(!0),o=e.querySelector("[data-adder-button]");o.addEventListener("click",function(){var e=n.cloneNode(!0);t.appendChild(e)})});var c=document.getElementById("question-options");if(c){var d=document.getElementById("quest-options-cont"),l=document.getElementById("quest-type"),s=function(){var e=l.options[l.selectedIndex];console.log(e.dataset.options),d.style.display=e.dataset.options?"block":"none"};l.addEventListener("change",s),s();dragula([c],{removeOnSpill:!0,moves:function(e,t,a,n){return!(t.children.length<2)&&a.classList.contains("drag-handle")}})}Chart.defaults.global.title.display=!0;var i=document.getElementById("pie-chart");if(i){new Chart(i.getContext("2d"),{type:"doughnut",options:{maintainAspectRatio:!1,title:{text:"GÃ©nero de los pacientes"}},data:{labels:["Mujeres","Hombres"],datasets:[{backgroundColor:["#34495e","#3498db"],data:[522,323]}]}})}var u=document.getElementById("age-chart");if(u){new Chart(u.getContext("2d"),{type:"bar",options:{maintainAspectRatio:!1,title:{text:"Edad promedio de los pacientes"}},data:{labels:["M","T","W","T","F","S","S"],datasets:[{label:"Mujeres",data:[12,19,3,17,6,3,7],backgroundColor:"#34495e"},{label:"Hombres",data:[2,29,5,5,2,3,10],backgroundColor:"#3498db"}]}})}var g=document.getElementById("patients-chart");if(g){new Chart(g.getContext("2d"),{type:"line",options:{maintainAspectRatio:!1,title:{text:"Promedio de encuestados"}},data:{labels:["M","T","W","T","F","S","S"],datasets:[{label:"Encuestados",data:[40,19,42,17,56,12,38],backgroundColor:"#34495e"}]}})}var m=document.getElementById("questions-source");if(m){var p=["number","multiple","scale","yes-no","styles"],y={};_(p).each(function(e){var t=document.getElementById(e+"-quest-tmpl").innerHTML;y[e]=t,Mustache.parse(y[e],["<%","%>"])});for(var v=[m],f=1;f<5;f++){var h=document.getElementById("visit-block-"+f);v.push(h)}var b=dragula(v,{removeOnSpill:!0,copy:function(e,t){return"questions-source"===t.id},accepts:function(e,t){return"questions-source"!==t.id},moves:function(e,t,a){return"questions-source"===t.id||a.classList.contains("drag-handle")}});b.on("drop",function(e,t,a,n){var o=e.dataset.questionDefinition;b.cancel(!0);var r=JSON.parse(o),c=t.querySelectorAll('[data-id="'+r.id+'"]');if(c.length>0)alert("Esta pregunta ya existe para esta visita");else{e.classList.contains("js-source")||e.remove(),r.visit_block=t.dataset.blockName,r.definition=o;var d=y[r.type],l=Mustache.render(d,r),s=document.createElement("div");s.innerHTML=l,t.insertBefore(s.children[0],n)}})}o("[data-appform-style-trigger]","change",e)}();
//# sourceMappingURL=app.js.map
